<!DOCTYPE html>
<html lang="ja">
  <head>
    <title>元号変換</title>
    <meta charset="utf-8">
  </head>
  <body>
    <h1>元号変換アプリ</h1>
    <select id="gengo">
      <option value="r">令和</option>
      <option value="h">平成</option>
      <option value="s">昭和</option>
      <option value="t">大正</option>
      <option value="m">明治</option>
    </select>
    <input id="wareki" type="number">
    <button onclick="doCalc()"> &gt;&gt; 計算 &gt;&gt; </button>
    <span id="ad">???</span>
    <!-- ここから6限-->
    <canvas id="canvas0" width="640" height="400", style="background: #efe;">
    </canvas>
 
    <script>
      let cv
      let ctx
      let x = 320
      let y = 450
      let vx = 5
      let vy = -25
      function drawFrame() {
        ctx.clearRect(0,0,640,480)
        ctx.beginPath()
        ctx.arc(x, y, 30, 0, Math.PI * 2)
        ctx.closePath()
        ctx.stroke()
        /////////////////////////////
        x = x + vx
        y = y + vy
        if (x > 630 || x < 30) vx = -vx
        if (x > 450 ) vy = -vy
        else          vy = vy + 1
        requestAnimationFrame(drawFrame)
      }
      
      onload = function () {
        cv = document.getElementById("canvas0")
        ctx = cv.getContext("2d")
        requestAnimationFrame(drawFrame)
      }
      function doCalc(){
        const wain = document.getElementById("wareki")
        const adout = document.getElementById("ad")
        const gsel = document.getElementById("gengo")
        const wa = parseInt(wain.value)
        const g = gsel.value
        let ad
        if (g=="r") ad = wa + 2018
        if (g=="h") ad = wa + 1988
        if (g=="s") ad = wa + 1925
        if (g=="t") ad = wa + 1911
        if (g=="m") ad = wa + 1868
        adout.innerHTML = ad
      }
    </script>
  </body>
</html>
